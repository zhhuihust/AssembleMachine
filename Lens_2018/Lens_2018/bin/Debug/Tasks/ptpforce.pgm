DVAR $PTPFORCE,$PTPINC,$JUDGE,$CPOS,$CFORCE,$IPOS,$IFORCE,$SCALE

$PTPFORCE=$GLOBAL[44]
$PTPINC=$GLOBAL[45]
$JUDGE=1
$SCALE=$GLOBAL[26]/10

INCREMENTAL

$IPOS=AXISSTATUS(X,DATAITEM_PositionFeedback)
$IFORCE=$AI[0].Z
WHILE $JUDGE
   $CPOS=AXISSTATUS(Z,DATAITEM_PositionFeedback)
   $CFORCE=$AI[0].Z
   
   IF(($CFORCE-$IFORCE)*$SCALE>$PTPFORCE) THEN
      $JUDGE=0
   ELSEIF (($CPOS-$IPOS)>5) THEN
      $JUDGE=0
   ELSE
      RAPID Z0.05 ZF100
   ENDIF
ENDWHILE

END PROGRAM
